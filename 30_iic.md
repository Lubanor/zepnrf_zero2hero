# **I2C 通信协议提要**

这里, 在有了前面的铺垫之后, 打算从iic开始入门(而不是常见的uart异步通信等).

---

## **1. 物理连接**
### **只需两根线**：
- **SCL**（时钟线）→ 同步节奏，像音乐指挥
- **SDA**（数据线）→ 传输实际数据

### **所有设备挂在这两根线上**（并联），通过**地址**区分设备。

---

## **2. 核心规则**
### **(1) 主从模式**
- **主设备**（如MCU）发起通信，控制时钟
- **从设备**（如传感器、屏幕）响应请求

### **(2) 地址寻址**
- 每个从设备有**唯一7位地址**（如`0x3C`）
- 主设备开头先喊：“`0x3C`，出山活动活动”

### **(3) 简单对话流程**
```
主设备：SCL拉高 + SDA从高→低 → "开始聊天！"
主设备：发送地址（7位） + 读/写位（1位）
从设备：SDA拉低 → "收到！"（ACK）
主设备：发送或接收数据
主设备：SCL拉高 + SDA从低→高 → "聊完了！"（STOP）
```

---

## **3. 优势**
✔ **硬件简单**：两根线 + 上拉电阻
✔ **自动协调**：时钟同步，无需严格时序
✔ **广泛支持**：传感器、屏幕、EEPROM都用它

---

也即, 硬件上
- **I2C**只需2根线（SCL时钟线 + SDA数据线），且把设备并联挂载上即可
- **SPI**需要4根线（SCLK、MOSI、MISO、CS），且每个从设备需单独片选线
- **UART**至少需要2根线（TX、RX），且设备间必须直连（无法多设备共享总线）

软件方面
- **I2C** 每个设备有**唯一7位地址**（如`0x3C`），主设备通过地址呼叫从设备
- **UART** 无地址概念，需手动协调设备收发
- **SPI** 依赖硬件片选（CS），地址管理更复杂

协调机制上
- I2C的**时钟同步（SCL）**和**应答（ACK）**机制自动处理同步问题
- UART需严格匹配波特率和数据格式，否则数据错乱
- SPI虽同步但需手动管理片选和时钟相位

| 维度          | I2C                          | UART                         | SPI                          |
|---------------|------------------------------|------------------------------|------------------------------|
| **硬件连接**  | ⭐⭐ 2根线（需上拉电阻）      | ⭐ 2根线（直连无需配置）      | ⭐⭐⭐ 4+N根线（每个从设备需单独片选） |
| **协议复杂度**| ⭐⭐ 固定地址+时钟同步        | ⭐⭐⭐ 需手动协调波特率/校验位 | ⭐ 时钟极性和相位可调但模式固定 |
| **调试工具**  | ⭐ 逻辑分析仪直接解析帧结构   | ⭐⭐ 需同步观察RX/TX时序      | ⭐⭐⭐ 多信号线交叉分析         |
| **典型应用**  | 传感器/小屏（OLED）         | 远距离模块间通信（GPS/蓝牙）  | 高速设备（Flash/显示屏）      |

---

### **总结：为什么从I2C开始入门？**

| 特性         | I2C              | UART             | SPI               |
|--------------|------------------|------------------|-------------------|
| **线数**     | 2根              | 2根              | 4根+N片选         |
| **多设备**   | v 直接支持       | ❌ 需软件协调     | ❌ 需硬件片选      |
| **同步方式** | 硬件自动同步      | 需严格匹配波特率  | 需配置时钟模式     |
| **调试难度** | ⭐（最简单）      | ⭐⭐⭐           | ⭐⭐              |

- **简单性**：硬件连接比SPI简单，协议比UART规范
- **确定性**：有地址和ACK机制，调试时问题更易定位
- **生态支持**：主流传感器/显示模块优先提供I2C接口

我是觉得, 有了iic, 就可以早点支楞上小屏oled -- 没什么比小屏幕对我们初学者更友好了.
